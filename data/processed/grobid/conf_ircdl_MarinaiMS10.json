{"bibliography":{"title":"Mathematical Symbol Indexing for Digital Libraries","authors":[{"person_name":{"surname":"Marinai","first_name":"Simone"},"affiliations":[],"email":"marinai@dsi.unifi.it"},{"person_name":{"surname":"Miotti","first_name":"Beatrice"},"affiliations":[],"email":null},{"person_name":{"surname":"Soda","first_name":"Giovanni"},"affiliations":[],"email":null}],"date":null,"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":null},"keywords":[],"citations":{"b0":{"title":"A Survey of Document Image Retrieval in Digital Libraries","authors":[{"person_name":{"surname":"Marinai","first_name":"S"},"affiliations":[],"email":null}],"date":{"year":"2006","month":"09","day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":193,"to_page":198}}},"b1":{"title":"Use of figures in literature mining for biomedical digital libraries","authors":[{"person_name":{"surname":"Chen","first_name":"N"},"affiliations":[],"email":null},{"person_name":{"surname":"Shatkay","first_name":"H"},"affiliations":[],"email":null},{"person_name":{"surname":"Blostein","first_name":"D"},"affiliations":[],"email":null}],"date":{"year":"2006","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":180,"to_page":197}}},"b2":{"title":"Automatic content-based indexing of digital documents through intelligent processing techniques","authors":[{"person_name":{"surname":"Esposito","first_name":"F"},"affiliations":[],"email":null},{"person_name":{"surname":"Ferilli","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Basile","first_name":"T"},"affiliations":[],"email":null},{"person_name":{"surname":"Mauro","first_name":"N"},"affiliations":[],"email":null}],"date":{"year":"2006","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":204,"to_page":219}}},"b3":{"title":"Social annotations in digital library collections","authors":[{"person_name":{"surname":"Gazan","first_name":"R"},"affiliations":[],"email":null}],"date":{"year":"2008","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"DLib. Magazine","series":null,"scope":{"volume":14,"pages":null}},"b4":{"title":"Content-based information retrieval and digital libraries","authors":[{"person_name":{"surname":"Wan","first_name":"G"},"affiliations":[],"email":null},{"person_name":{"surname":"Liu","first_name":"Z"},"affiliations":[],"email":null}],"date":{"year":"2008","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"Information Technology & Libraries","series":null,"scope":{"volume":27,"pages":{"from_page":41,"to_page":47}}},"b5":{"title":"The indexing and retrieval of document images: A survey","authors":[{"person_name":{"surname":"Doermann","first_name":"D"},"affiliations":[],"email":null}],"date":{"year":"1998","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"Computer Vision and Image Understanding","series":null,"scope":{"volume":70,"pages":{"from_page":287,"to_page":298}}},"b6":{"title":"Information retrieval from documents: A survey","authors":[{"person_name":{"surname":"Mitra","first_name":"M"},"affiliations":[],"email":null},{"person_name":{"surname":"Chaudhuri","first_name":"B"},"affiliations":[],"email":null}],"date":{"year":"2000","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"Information Retrieval","series":null,"scope":{"volume":2,"pages":{"from_page":141,"to_page":163}}},"b7":{"title":"Automatic indexing and reformulation of ancient dictionaries","authors":[{"person_name":{"surname":"Belaïd","first_name":"A"},"affiliations":[],"email":null},{"person_name":{"surname":"Turcan","first_name":"I"},"affiliations":[],"email":null},{"person_name":{"surname":"Pierrel","first_name":"J"},"affiliations":[],"email":null},{"person_name":{"surname":"Belaïd","first_name":"Y"},"affiliations":[],"email":null},{"person_name":{"surname":"Hadjamar","first_name":"Y"},"affiliations":[],"email":null},{"person_name":{"surname":"Hadjamar","first_name":"H"},"affiliations":[],"email":null}],"date":{"year":"2004","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE Computer Society","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":342,"to_page":342}}},"b8":{"title":"Font adaptive word indexing of modern printed documents","authors":[{"person_name":{"surname":"Marinai","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Marino","first_name":"E"},"affiliations":[],"email":null},{"person_name":{"surname":"Soda","first_name":"G"},"affiliations":[],"email":null}],"date":{"year":"2006","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"IEEE Transactions on PAMI","series":null,"scope":{"volume":28,"pages":{"from_page":1187,"to_page":1199}}},"b9":{"title":"Keyword spotting in document images through word shape coding","authors":[{"person_name":{"surname":"Bai","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Li","first_name":"L"},"affiliations":[],"email":null},{"person_name":{"surname":"Tan","first_name":"C"},"affiliations":[],"email":null}],"date":{"year":"2009","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE Computer Society","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":331,"to_page":331}}},"b10":{"title":"A fast keyword-spotting technique","authors":[{"person_name":{"surname":"Li","first_name":"L"},"affiliations":[],"email":null},{"person_name":{"surname":"Lu","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Tan","first_name":"C"},"affiliations":[],"email":null}],"date":{"year":"2007","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE Computer Society","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":68,"to_page":72}}},"b11":{"title":"Document image retrieval through word shape coding","authors":[{"person_name":{"surname":"Lu","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Li","first_name":"L"},"affiliations":[],"email":null},{"person_name":{"surname":"Tan","first_name":"C"},"affiliations":[],"email":null}],"date":{"year":"2008","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"IEEE Trans. Pattern Anal. Mach. Intell","series":null,"scope":{"volume":30,"pages":{"from_page":1913,"to_page":1918}}},"b12":{"title":"Infty: an integrated ocr system for mathematical documents","authors":[{"person_name":{"surname":"Suzuki","first_name":"M"},"affiliations":[],"email":null},{"person_name":{"surname":"Tamari","first_name":"F"},"affiliations":[],"email":null},{"person_name":{"surname":"Fukuda","first_name":"R"},"affiliations":[],"email":null},{"person_name":{"surname":"Uchida","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Kanahori","first_name":"T"},"affiliations":[],"email":null}],"date":{"year":"2003","month":null,"day":null},"ids":null,"target":null,"publisher":"ACM","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":95,"to_page":104}}},"b13":{"title":"Identification of embedded mathematical expressions in scanned documents","authors":[{"person_name":{"surname":"Garain","first_name":"U"},"affiliations":[],"email":null},{"person_name":{"surname":"Chaudhuri","first_name":"B"},"affiliations":[],"email":null},{"person_name":{"surname":"Chaudhuri","first_name":"A"},"affiliations":[],"email":null}],"date":{"year":"2004","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"ICPR","series":null,"scope":{"volume":1,"pages":{"from_page":384,"to_page":387}}},"b14":{"title":"An automatic mathematical expression understanding system","authors":[{"person_name":{"surname":"Guo","first_name":"Y"},"affiliations":[],"email":null},{"person_name":{"surname":"Huang","first_name":"L"},"affiliations":[],"email":null},{"person_name":{"surname":"Liu","first_name":"C"},"affiliations":[],"email":null},{"person_name":{"surname":"Jiang","first_name":"X"},"affiliations":[],"email":null}],"date":{"year":"2007","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE Computer Society","journal":null,"series":null,"scope":{"volume":2,"pages":{"from_page":719,"to_page":723}}},"b15":{"title":"Document representation and its application to page decomposition","authors":[{"person_name":{"surname":"Anil","first_name":"K"},"affiliations":[],"email":null},{"person_name":{"surname":"Bin","first_name":"Y"},"affiliations":[],"email":null}],"date":{"year":"1998","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"IEEE Trans. Pattern Anal. Mach. Intell","series":null,"scope":{"volume":20,"pages":{"from_page":294,"to_page":308}}},"b16":{"title":"Physical structure segmentation with projection profile for mathematic formulae and graphics in academic paper images","authors":[{"person_name":{"surname":"Chang","first_name":"T"},"affiliations":[],"email":null},{"person_name":{"surname":"Takiguchi","first_name":"Y"},"affiliations":[],"email":null},{"person_name":{"surname":"Okada","first_name":"M"},"affiliations":[],"email":null}],"date":{"year":"2007","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE Computer Society","journal":null,"series":null,"scope":{"volume":2,"pages":{"from_page":1193,"to_page":1197}}},"b17":{"title":"A study on character recognition error correction at higher level recognition step for mathematical formulae understanding","authors":[{"person_name":{"surname":"Takiguchi","first_name":"Y"},"affiliations":[],"email":null},{"person_name":{"surname":"Okada","first_name":"M"},"affiliations":[],"email":null},{"person_name":{"surname":"Miyake","first_name":"Y"},"affiliations":[],"email":null}],"date":{"year":"2006","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":{"volume":2,"pages":{"from_page":966,"to_page":969}}},"b18":{"title":"Structural analysis of mathematical formulae with verification based on formula description grammar","authors":[{"person_name":{"surname":"Toyota","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Uchida","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Suzuki","first_name":"M"},"affiliations":[],"email":null}],"date":{"year":"2006","month":null,"day":null},"ids":null,"target":null,"publisher":"Springer","journal":null,"series":null,"scope":{"volume":3872,"pages":{"from_page":153,"to_page":163}}},"b19":{"title":"Mathematical symbol indexing using topologically ordered clusters of shape contexts","authors":[{"person_name":{"surname":"Marinai","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Miotti","first_name":"B"},"affiliations":[],"email":null},{"person_name":{"surname":"Soda","first_name":"G"},"affiliations":[],"email":null}],"date":{"year":"2009","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":1041,"to_page":1045}}},"b20":{"title":"Roles of math search in mathematics","authors":[{"person_name":{"surname":"Youssef","first_name":"A"},"affiliations":[],"email":null}],"date":{"year":"2006","month":null,"day":null},"ids":null,"target":null,"publisher":"Springer","journal":null,"series":null,"scope":{"volume":4108,"pages":{"from_page":2,"to_page":16}}},"b21":{"title":"A search engine for mathematical formulae","authors":[{"person_name":{"surname":"Kohlhase","first_name":"M"},"affiliations":[],"email":null},{"person_name":{"surname":"Sucan","first_name":"I"},"affiliations":[],"email":null}],"date":{"year":"2006","month":null,"day":null},"ids":null,"target":null,"publisher":"Springer","journal":null,"series":null,"scope":{"volume":4120,"pages":{"from_page":241,"to_page":253}}},"b22":{"title":"Shape matching and object recognition using shape contexts","authors":[{"person_name":{"surname":"Belongie","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Malik","first_name":"J"},"affiliations":[],"email":null},{"person_name":{"surname":"Puzicha","first_name":"J"},"affiliations":[],"email":null}],"date":{"year":"2002","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"IEEE Transactions on Pattern Analysis and Machine Intelligence","series":null,"scope":{"volume":24,"pages":{"from_page":509,"to_page":522}}},"b23":{"title":"Mathematical symbol indexing","authors":[{"person_name":{"surname":"Marinai","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Miotti","first_name":"B"},"affiliations":[],"email":null},{"person_name":{"surname":"Soda","first_name":"G"},"affiliations":[],"email":null}],"date":{"year":"2009","month":null,"day":null},"ids":null,"target":null,"publisher":"Springer","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":102,"to_page":111}}},"b24":{"title":"Evaluating bag-of-visualwords representations in scene classification","authors":[{"person_name":{"surname":"Yang","first_name":"J"},"affiliations":[],"email":null},{"person_name":{"surname":"Jiang","first_name":"Y"},"affiliations":[],"email":null},{"person_name":{"surname":"Hauptmann","first_name":"A"},"affiliations":[],"email":null},{"person_name":{"surname":"Ngo","first_name":"C"},"affiliations":[],"email":null}],"date":{"year":"2007","month":null,"day":null},"ids":null,"target":null,"publisher":"ACM","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":197,"to_page":206}}},"b25":{"title":"Infty: an integrated ocr system for mathematical documents","authors":[{"person_name":{"surname":"Suzuki","first_name":"M"},"affiliations":[],"email":null},{"person_name":{"surname":"Tamari","first_name":"F"},"affiliations":[],"email":null},{"person_name":{"surname":"Fukuda","first_name":"R"},"affiliations":[],"email":null},{"person_name":{"surname":"Uchida","first_name":"S"},"affiliations":[],"email":null},{"person_name":{"surname":"Kanahori","first_name":"T"},"affiliations":[],"email":null}],"date":{"year":"2003","month":null,"day":null},"ids":null,"target":null,"publisher":"ACM","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":95,"to_page":104}}},"b26":{"title":"Modern Information Retrieval","authors":[{"person_name":{"surname":"Baeza-Yates","first_name":"R"},"affiliations":[],"email":null},{"person_name":{"surname":"Ribeiro-Neto","first_name":"B"},"affiliations":[],"email":null}],"date":{"year":"1999","month":null,"day":null},"ids":null,"target":null,"publisher":"Addison Wesley","journal":null,"series":null,"scope":null}},"sections":[{"title":"Introduction","paragraphs":[{"text":"Nowdays, Digital library technologies are well established and understood. This is proven by the large number of papers related to this topic published in the last few years and by the broad range of systems already available in the Web. In most cases DLs deal with digitized documents, books and journals that are represented as images where Document Recognition techniques can be applied. For instance in many cases the document images are processed by means of Optical Character Recognition (OCR) techniques in order to extract their textual content.","refs":[]},{"text":"One related research area, that has not yet fully implemented in DL systems, is based on Document Image Retrieval approaches, where relevant documents are identified relying only on image features [1].","refs":[{"start":197,"end":200,"marker":"bibr","target":"#b0"}]},{"text":"In the last few years, most documents belonging to DLs are \"born-digital\" (rather than being digitized) and, as consequence, some techniques have been proposed to perform the retrieval of a user query [2] [3]. Digital Libraries can now be considered as collections of digital contents which are available through the Internet, but not necessarily public. DLs architectures and services are in continuous evolution because of their close contact with Web2.0 technologies. In the era of social networks, the users are called as main characters to build and maintain DLs which can be reached by Internet [4]. The interaction between users, to develop and update DLs, is the aim of DLs owners. Some examples of this new approach to DLs are Flickr, Facebook and other social networks which ask for the user help to increase the contents and to classify each element by means of keywords.","refs":[{"start":201,"end":204,"marker":"bibr","target":"#b1"},{"start":205,"end":208,"marker":"bibr","target":"#b2"},{"start":601,"end":604,"marker":"bibr","target":"#b3"}]},{"text":"In our research we are interested in analyzing techniques which can be used in the phase of information extraction and retrieval from scanned or digital born documents in the Digital Library. These techniques can be classified according to the working level in three categories [5,1].","refs":[{"start":278,"end":281,"marker":"bibr","target":"#b4"},{"start":281,"end":283,"marker":"bibr","target":"#b0"}]},{"text":"The first is the free browsing and is the easiest to implement: in this case a user browses through a document collection, looking for the desired information by visually checking the document images.","refs":[]},{"text":"The second is the recognition-based retrieval which is based on the recognition of the document contents. According to it, the similarity between documents is evaluated at symbolic level and it assumes that a recognition engine can extract the full text of text-based documents or a set of metadata from multimedia documents. The textual information is then indexed and the retrieval is performed by means of keywords furnished by the user. The recognition-based approach has the advantage that the similarity computation and results ranking has a lower computational cost. On the other hand it has some limitations when OCR systems cannot perform well (when dealing with very noisy documents or containing multi-lingual text) or are not yet fully implemented (such as for mathematical symbol recognition, that is addressed in this paper). Some of the earliest methods adopted for the recognition-based approach, and in particular for OCR-based text retrieval, have been described in two comprehensive surveys [6,7]. A mixed approach is proposed in [8] where document image analysis techniques are used together with OCR engines and metadata extraction.","refs":[{"start":1010,"end":1013,"marker":"bibr","target":"#b5"},{"start":1013,"end":1015,"marker":"bibr","target":"#b6"},{"start":1049,"end":1052,"marker":"bibr","target":"#b7"}]},{"text":"The last category is based on recognition-free retrieval methods and can be regarded also as content based approaches. In this case the similarity is evaluated considering the actual content of the document images. That is some features, closely related to the document images like colors texture or shape, are extracted. The user can perform the retrieval on a Query by Example (QbE) approach i.e. presenting a query image to the system and looking at a result ranking.","refs":[]},{"text":"One advantage of a recognition-free approach is the possibility of looking for information without the need of some specific background knowledge. For example users may perform a QbE query with keywords in any language and the system does not need to know the language in the phase of the document indexing [9]. On the other hand, even recognition-free approaches have some limitations, especially regarding the selection of the feature set. Most systems work with low level features such as color, texture and shape, while only few system are able to extract high level or semantic features.","refs":[{"start":307,"end":310,"marker":"bibr","target":"#b8"}]},{"text":"In [10], [11] and [12] key-word spotting techniques have been proposed based on the Word Shape Coding and on set of low-level features. A different approach has been proposed in [9] where words are indexed on the basis of character shapes.","refs":[{"start":3,"end":7,"marker":"bibr","target":"#b9"},{"start":9,"end":13,"marker":"bibr","target":"#b10"},{"start":18,"end":22,"marker":"bibr","target":"#b11"},{"start":178,"end":181,"marker":"bibr","target":"#b8"}]},{"text":"Due to the large number of scientific and technical documents that are nowadays available in Digital Libraries, many efforts have been devoted to build systems which are able to recognize the mathematical expressions embedded in printed documents. Because of the very large number of symbol classes and the spatial relationships among symbol, OCR engines often fail in the recognition phase [13] [14].","refs":[{"start":391,"end":395,"marker":"bibr","target":"#b12"},{"start":396,"end":400,"marker":"bibr","target":"#b13"}]},{"text":"According to [15], most systems for mathematical expression analysis are based on four main steps. Layout Analysis that is used to extract the layout of the document images. The most common techniques rely on connected components extraction and are based on bottom-up (e.g. [16]) or top-down (e.g. [17] approaches. Symbol Segmentation that is aimed at identifying each individual symbol, that in most cases correspond to one connected component. Symbol Recognition that is mostly based on machine learning techniques. For instance, Takiguchi et al. [18] and Suzuki et al. [13] represent the symbols according to pixel intensity value features and physical peculiarities. Structural Analysis is performed in order to understand whole equations. Toyota et al. [19] build relation trees among various symbols according to the mutual physical positions or to logic considerations. Document image retrieval techniques have been seldom used to process mathematical expressions [20]. However, several researchers envisage the usefulness of search systems that could search for text and also for \"fine-grain mathematical data\" such as equations and functions [21]. Most search systems for mathematical documents rely on specific markup languages. For instance the MathWebSearch system harvests the Web for formulae indexed with MathML or OpenMath representations [22].","refs":[{"start":13,"end":17,"marker":"bibr","target":"#b14"},{"start":274,"end":278,"marker":"bibr","target":"#b15"},{"start":298,"end":302,"marker":"bibr","target":"#b16"},{"start":549,"end":553,"marker":"bibr","target":"#b17"},{"start":572,"end":576,"marker":"bibr","target":"#b12"},{"start":758,"end":762,"marker":"bibr","target":"#b18"},{"start":971,"end":975,"marker":"bibr","target":"#b19"},{"start":1151,"end":1155,"marker":"bibr","target":"#b20"},{"start":1355,"end":1359,"marker":"bibr","target":"#b21"}]},{"text":"In this paper, we present a system based on a recognition-free approach for the retrieval of mathematical symbols belonging to a collection of documents. We do not explicitly deal with the symbol recognition, but we focus on the retrieval of mathematical symbols. This can be considered as a preliminary phase to the mathematical formulae retrieval which is the general aim of our work.","refs":[]},{"text":"The system described in this paper is made up by three steps: in the first step for each symbol in the collection we compute a set of features that are used to index it. In the second step visual queries proposed by the user are analyzed in order to compute the same features computed during the indexing. In the last step the similarity among query vectors and each coded collection element is evaluated and the results are ranked.","refs":[]},{"text":"The paper is organized as follows. In Sect. 2 we describe the indexing and retrieval method. The Infty database and the experiments are described in Sect. 3. Conclusions and future work are drawn in Sect. 4.","refs":[]}]},{"title":"Mathematical Symbol Indexing","paragraphs":[{"text":"Checking two occurrences of a mathematical symbol a human observer is able to glean over the differences and basing on the symbol shape he can assert these images represent the same symbol. This kind of visual analysis should be extended to be used in a automatic process. Each image contains local interest points that concentrate most of its information, in particular the shape of the symbol is a peculiarity of the object. To demonstrate this feature of mathematical symbols we show in Fig. 1 some examples of queries with the corresponding top ten results as reported by our system. Two main approaches can be considered to describe an image (e.g. [23]): the brightness-based ones take into account the pixel values, whereas the featurebased approaches involve the use of physical peculiarities of the symbol, such as edge elements and connected components.","refs":[{"start":495,"end":496,"marker":"figure","target":"#fig_0"},{"start":653,"end":657,"marker":"bibr","target":"#b22"}]},{"text":"In printed documents the mathematical symbols correspond in most cases to separated connected components. In our work we therefore use a feature-based approach that is more appropriate to describe the symbol shape.","refs":[]},{"text":"Since the number of symbol classes in mathematics is very large we need a compact way to express similarity among symbols in the same class even if they look like different. The classes include characters from Greek, German, Latin alphabets and mathematical symbols. Moreover, some of them appear in general in different styles, fonts and sizes. Additional details about the dataset that we used in our experiments are reported in Sect. 3.","refs":[]},{"text":"Among other approaches, we use Shape Contexts (SC) [23] to describe mathematical symbols shapes considering both the internal and external contours. In general, similar shapes have similar descriptors and therefore different symbols can be compared considering the SCs and then establishing a similarity measure.","refs":[{"start":51,"end":55,"marker":"bibr","target":"#b22"}]},{"text":"The symbol image is processed to identify the internal and external contours that are subsequently described as a set of points. A subset P of sampled points is then extracted as representative of the symbol shape (Fig. 2).","refs":[{"start":220,"end":221,"marker":"figure","target":"#fig_1"}]}]},{"title":"Keypoints Selection","paragraphs":[{"text":"An important point of the SC-based symbol representation is the identification of keypoints on which Shape Contexts have to be evaluated. In the original paper [23] the keypoints are extracted from the internal and external symbol contours. In particular the contours are sampled with a regular spacing between keypoints. We performed the first experiments (described in Sect. 3) following this approach. We considered also other approaches to identify keypoints by looking for salient contour points. To this purpose we considered both the corner and the local maximum curvature approaches.","refs":[{"start":160,"end":164,"marker":"bibr","target":"#b22"}]},{"text":"A corner point has two dominant and different edge directions in its neighborhood and can be detected considering the gradient of the image. In the second approach we can define a local maximum point as a point whose local contour has a curvature which is higher than a given threshold. The curvature can be estimated considering the angle between consecutive line segments. The segments are computed with a linear interpolation of the contour on the basis of a maximum distance between the contour points and the interpolating segment. This distance has an important role in the evaluation of the curvature: with a small distance the approach will be sensible to the noise in the image and too many keypoints will be identified. On the opposite with a large distance some relevant points will be lost. Some symbols, for example the \"0\", present curvature values almost constant and near to the average value while other symbols, as a \"[\", present only few points whose curvature values are interesting (the two corners and the endpoints). In order to alleviate the problems, the keypoints are selected among the points with a curvature greater than a threshold that is dynamically adjusted for each symbol by setting it to the average of all the curvature values in the image. In Sect. 3 we compare the results that are obtained with these approaches for keypoint selection.","refs":[]}]},{"title":"Shape Contexts Evaluation","paragraphs":[{"text":"The Shape Context for each point p i in P can be computed by considering the relative position of the other points in P . The SC for p i is obtained by computing a coarse histogram h i whose bins are uniform in log-polar space (Fig. 2 (b),(c)) as described in the following. Let m be the cardinality of P and p j be one of the remaining m-1 points in P . The point p j is assigned to one bin according to the logarithm of the Euclidean distance between p i and p j and to the direction of the link between p i and p j . The histogram h i is defined to be the Shape Context of p i .","refs":[{"start":233,"end":239,"marker":"figure","target":"#fig_1"},{"start":239,"end":241,"marker":"figure","target":null}]},{"text":"The m SC vectors indirectly describe the whole symbol. It is clear that shape contexts are invariant to translations. The SC computation can be modified in order to obtain descriptions that are scale and rotation invariant [23].","refs":[{"start":223,"end":227,"marker":"bibr","target":"#b22"}]},{"text":"For mathematical symbol indexing the rotation can be misleading because we could confuse symbols such as 6 with 9 and ∪ with ∩. To deal with mathematical symbols we also adapted the SC computation taking into account the SC radius (maximum distance of points included in the histogram) and the most set of points to be considered in the histogram population.","refs":[]},{"text":"Large values of the SC radius allows to embrace the whole image and therefore each SC is influenced by points very far from it. With a small radius we should deal with the points that fall out of the last mask bins. Two address the latter point two alternatives are possible. In one solution all the external points are included in the last bins that will have values significantly higher than the other bins. On the opposite, if the external points are not counted the resulting SC will describe a little portion of the symbol shape with the risk to loose information.","refs":[]},{"text":"To find out the most suitable radius we performed several experiments which are reported in detail in [24]. From these experiments it turned out that an halfway radius (20 pixels) that is a little bit smaller than the average image size should be preferred in most cases.","refs":[{"start":102,"end":106,"marker":"bibr","target":"#b23"}]},{"text":"To increase the robustness against the symbol noise we compute h i by counting the number of all the symbol points that belong to each bin instead of considering only the points in P . In so doing, each SC bin is more populated and more informative. We followed this approach because the symbols in the Infty dataset are small (on the average 20 x 30 pixel), and therefore the number of contour pixels is low and with the standard algorithm only a few bins of the SCs would contain some points. This choice is supported by some preliminary experiments that we described in [24].","refs":[{"start":573,"end":577,"marker":"bibr","target":"#b23"}]}]},{"title":"SOM-Based Visual Dictionary","paragraphs":[{"text":"The comparison between the Shape Contexts in a query symbol and those in each indexed object can provide a very accurate evaluation of similarity among symbols. However, the computational cost of a pairwise comparison is too high and cannot be considered when dealing with large data-sets. One typical solution of this problem is based on the transformation of the shape representation using techniques adopted in the vector space model of Information Retrieval.","refs":[]},{"text":"To this purpose, the vector quantization is first performed by clustering the vector representations and then identifying each vector with the index of the cluster it belongs to. The clusters are in most cases identified by running the Kmeans algorithm on a sub-set of the objects to be indexed. In the textual analogy each cluster is considered as a \"visual-word\" and each symbol can be represented on the basis of the frequencies of each \"visual-word\" in its description [25].","refs":[{"start":473,"end":477,"marker":"bibr","target":"#b24"}]},{"text":"Although simple to implement, one limitation of the K-means clustering algorithm is that it does not take into account any similarity among clusters. In other words points belonging to different clusters (or SCs corresponding to different \"visual-words\") contribute in the same way to the symbol similarity either when the clusters are similar or when they are dissimilar. The peculiarity of the approach described in this paper is the use of Self Organizing Maps (SOM) to perform the vector quantization. In this case, in contrast with K-means, the clusters are topologically ordered in the SOM map. As example we depict in Fig. 3 a portion of an SOM, used to index the mathematical symbols, together with two symbols. Each cluster is pictorially depicted by reconstructing a virtual Shape Context that corresponds to the values in the SOM related to that particular Fig. 3. Visual words obtained by SOM clustering. Each circle is a graphical representation of one cluster centroid. We show also two symbols with a reference to some visual words.","refs":[{"start":630,"end":631,"marker":"figure","target":null},{"start":873,"end":874,"marker":"figure","target":null}]},{"text":"centroid. From the map it is clear that similar SCs are placed in close neurons in the map.","refs":[]},{"text":"The similarity between the query vector and each element of the index is evaluated by means of the cosine similarity function. As proposed in [20], we have modified the cosine formula to take advantage of the topological peculiarity of the SOM map. In particular, we perform an inexact match between two vector representations of two symbols considering, for each element of the query vector that has not a correspondent in the indexed vector, the four or eight neighbors of it and we take as winner the maximum among them weighted according to its position in the map.","refs":[{"start":142,"end":146,"marker":"bibr","target":"#b19"}]}]},{"title":"Experiments","paragraphs":[{"text":"We made our experiments on two datasets collected by the INFTY project [26]. The InftyCDB-3-A dataset consists of 188,752 symbols scanned at 400 dpi extracted from 19 articles printed by various publishers, and from other sources so as to cover all the most important mathematical symbols. The InftyCDB-3-B contains 70,637 symbols scanned at 600 dpi from 20 articles. Ground-truth information at the symbol level is provided for both datasets. It is important to notice that the same code has been assigned to different symbols that look similar (e.g. the summation symbol and the Greek letter Σ). In the two datasets (which consist of 346 pages) there are 393 different classes. Before indexing the data, we computed the SC clusters on a set of 22, 923 symbols, belonging to 53 pages randomly selected from the whole dataset. From each symbol we extract around 50 SCs so that we used 1,102,049 feature vectors for clustering. We then indexed all the 259,357 symbols in the two datasets and we performed several experiments to compare alternative approaches that can be used to index the data.","refs":[{"start":71,"end":75,"marker":"bibr","target":"#b25"}]},{"text":"To evaluate the retrieval results we use the Precision-Recall curves and a single numerical value: the Precision at 0 % Recall, which is obtained through an interpolation procedure of the Precision-Recall curve as detailed in [27]. As usual, the Recall is defined as the fraction of the relevant symbols which have been retrieved: Recall = |tp| |tp+fn| ; the Precision is defined as the fraction of retrieved symbols which are relevant: P recision = |tp| |tp+fp| ; where tp (true positive) are the retrieved symbols which are relevant, fp (false positive) are the retrieved symbols which are not relevant, fn are the relevant symbols which have not been retrieved. We computed the P-R curve for interpolation after estimating the precision when the recall is a multiple of 10.","refs":[{"start":226,"end":230,"marker":"bibr","target":"#b26"}]},{"text":"In the experiments reported in this paper we made 392 queries randomly selected from the dataset. To obtain a correct comparison among methods, we always used the same set of 392 queries. To estimate the suitability of the SOM clustering we first compared it with the K-means clustering. Some preliminary experiments are reported in [20] and in [24]. The latter are summarized in Table 1 where we can verify that the SOM clustering together with a computation of SCs with all the symbol points (SC AllPoints) provides the best results. To compare the two approaches for keypoint selection described in Sect. 2.1 we performed some experiments where we used the same settings of the previous experiments.","refs":[{"start":333,"end":337,"marker":"bibr","target":"#b19"},{"start":345,"end":349,"marker":"bibr","target":"#b23"},{"start":386,"end":387,"marker":"table","target":"#tab_0"}]},{"text":"In Table 2 and Fig. 4 we show the Precision at 0 % Recall and the Precision-Recall curves for the two approaches. In the experiments we considered three map sizes (with 100, 200, and 400 neurons) and also three functions to compute   the symbol similarity. The similarity among query vectors and indexed elements is evaluated by means of the cosine similarity function and two variants of it sim4 and sim8 as explained in detail in [20]. From these experiments we can observe that larger maps provide in general better results. However, in this experiment there is no considerable difference among the three similarity functions. To compare the two methods we report in Fig. 5 the best plots of Fig. 4. From this figure it is clear that the curvature method is better than the other.","refs":[{"start":9,"end":10,"marker":"table","target":"#tab_1"},{"start":20,"end":21,"marker":"figure","target":"#fig_3"},{"start":432,"end":436,"marker":"bibr","target":"#b19"},{"start":675,"end":676,"marker":"figure","target":"#fig_4"},{"start":700,"end":701,"marker":"figure","target":"#fig_3"}]},{"text":"From the previous experiments it is not possible to understand whether there is any advantage in the use of one similarity function with respect to the others. This is probably due to the low number of queries that we used. We therefore performed an additional experiment considering an SOM map with 400 centroids and the curvature approach. The other settings are fixed as before, but we performed 3920 queries. The results, evaluated with the Precision Recall curve, show that the values of Precision at 0 % Recall are nearly the same for all similarity functions. To compare in a better way the methods, we considered the area under these curves as a quality measure. The results are shown in Table 3. As we can see, the sim4 similarity function although starting from a similar value than the others, tends to have higher values when the Recall increases.","refs":[{"start":702,"end":703,"marker":"table","target":"#tab_2"}]}]},{"title":"Conclusions","paragraphs":[{"text":"In this paper, we proposed a technique for image-based symbol retrieval based on Shape Context representation encoded with a bag of visual words method. The peculiarity of the approach is the use of Self Organizing Maps for clustering the Shape Contexts into a suitable visual dictionary. We also compared various methods to compute the SCs as well as different clustering approaches. Experiments performed on a large and widely used data set containing both alphanumeric and mathematical symbols allows us to positively evaluate the proposed approach.","refs":[]},{"text":"Future work includes a deeper comparison of various retrieval approaches. We aim also to extend the retrieval mechanism to incorporate the structural information of the formulae in the retrieval algorithm.","refs":[]}]}],"tables":{"tab_0":{"heading":"Table 1 .","description":"Precision at 0 % Recall for the K-means and SOM experiments","rows":[["Methods","K-means SOM"],["SC Std","74.69","73.17"],["SC AllPoints 79.93 86.81"]]},"tab_1":{"heading":"Table 2 .","description":"Precision at 0 % Recall for the detection of keypoints based on local maximum curvature and corner methods. Three sizes of the SOM are compared as well.","rows":[["","Curvature","Corner"],["Precision at 0% Recall","10x10 10x20 20x20","10x10 10x20 20x20"],["sim","95.82 96.22 97.86","90.87 91.44 93.31"],["sim4","95.83 96.21 97.84","90.97 91.40 93.29"],["sim8","95.82 96.19 97.83","90.82 91.51 93.44"]]},"tab_2":{"heading":"Table 3 .","description":"Area under the curve (AUC) of P-R in case of 3920 queries","rows":[["sim","sim4","sim8"],["AUC 2345,08 2410,34 2383,76"]]}},"abstract":{"title":"Abstract","paragraphs":[{"text":"In this paper we describe our recent research for mathematical symbol indexing and its possible application in the Digital Library domain. The proposed approach represents mathematical symbols by means of Shape Contexts (SC) description. Indexed symbols are represented with a vector space-based method, but peculiar to our approach is the use of Self Organizing Maps (SOM) to perform the clustering instead of the commonly used k-means algorithm. The retrieval performance are measured on a large collection of mathematical symbols gathered from the widely used INFTY database.","refs":[]}]}}
{"bibliography":{"title":"Indexing of Historical Document Images: Ad Hoc Dewarping Technique for Handwritten Text","authors":[{"person_name":{"surname":"Bolelli","first_name":"Federico"},"affiliations":[{"department":"Dipartimento di Ingegneria \"Enzo Ferrari\"","institution":"Università degli Studi di Modena e Reggio Emilia","laboratory":null}],"email":"federico.bolelli@unimore.it"}],"date":null,"ids":{"DOI":"10.1007/978-3-319-68130-6_4","arXiv":null},"target":null,"publisher":null,"journal":null,"series":null,"scope":null},"keywords":["Page rectification","Dewarping","Document indexing"],"citations":{"b0":{"title":"Classification of affective data to evaluate the level design in a role-playing videogame","authors":[{"person_name":{"surname":"Balducci","first_name":"F"},"affiliations":[],"email":null},{"person_name":{"surname":"Grana","first_name":"C"},"affiliations":[],"email":null},{"person_name":{"surname":"Cucchiara","first_name":"R"},"affiliations":[],"email":null}],"date":{"year":"2015","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":1,"to_page":8}}},"b1":{"title":"Hierarchical boundary-aware neural encoder for video captioning","authors":[{"person_name":{"surname":"Baraldi","first_name":"L"},"affiliations":[],"email":null},{"person_name":{"surname":"Grana","first_name":"C"},"affiliations":[],"email":null},{"person_name":{"surname":"Cucchiara","first_name":"R"},"affiliations":[],"email":null}],"date":{"year":"2016","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":null},"b2":{"title":"Recognizing and presenting the storytelling video structure with deep multimodal networks","authors":[{"person_name":{"surname":"Baraldi","first_name":"L"},"affiliations":[],"email":null},{"person_name":{"surname":"Grana","first_name":"C"},"affiliations":[],"email":null},{"person_name":{"surname":"Cucchiara","first_name":"R"},"affiliations":[],"email":null}],"date":{"year":"2017","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"IEEE Trans. Multimed","series":null,"scope":{"volume":19,"pages":{"from_page":955,"to_page":968}}},"b3":{"title":"Historical handwritten text images word spotting through sliding window hog features","authors":[{"person_name":{"surname":"Bolelli","first_name":"F"},"affiliations":[],"email":null},{"person_name":{"surname":"Borghi","first_name":"G"},"affiliations":[],"email":null},{"person_name":{"surname":"Grana","first_name":"C"},"affiliations":[],"email":null}],"date":{"year":"2017","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":null},"b4":{"title":"Rectifying the bound document image captured by the camera: a model based approach","authors":[{"person_name":{"surname":"Cao","first_name":"H"},"affiliations":[],"email":null},{"person_name":{"surname":"Ding","first_name":"X"},"affiliations":[],"email":null},{"person_name":{"surname":"Liu","first_name":"C"},"affiliations":[],"email":null}],"date":{"year":"2003","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":71,"to_page":75}}},"b5":{"title":"Use of the hough transformation to detect lines and curves in pictures","authors":[{"person_name":{"surname":"Duda","first_name":"R"},"affiliations":[],"email":null},{"person_name":{"surname":"Hart","first_name":"P"},"affiliations":[],"email":null}],"date":{"year":"1972","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"Commun. ACM","series":null,"scope":{"volume":15,"pages":{"from_page":11,"to_page":15}}},"b6":{"title":"A model-based book dewarping method using text line detection","authors":[{"person_name":{"surname":"Fu","first_name":"B"},"affiliations":[],"email":null},{"person_name":{"surname":"Wu","first_name":"M"},"affiliations":[],"email":null},{"person_name":{"surname":"Li","first_name":"R"},"affiliations":[],"email":null},{"person_name":{"surname":"Li","first_name":"W"},"affiliations":[],"email":null},{"person_name":{"surname":"Xu","first_name":"Z"},"affiliations":[],"email":null},{"person_name":{"surname":"Yang","first_name":"C"},"affiliations":[],"email":null}],"date":{"year":"2007","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":63,"to_page":70}}},"b7":{"title":"Segmentation based recovery of arbitrarily warped document images","authors":[{"person_name":{"surname":"Gatos","first_name":"B"},"affiliations":[],"email":null},{"person_name":{"surname":"Pratikakis","first_name":"I"},"affiliations":[],"email":null},{"person_name":{"surname":"Ntirogiannis","first_name":"K"},"affiliations":[],"email":null}],"date":{"year":"2007","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE","journal":null,"series":null,"scope":{"volume":2,"pages":{"from_page":989,"to_page":993}}},"b8":{"title":"Optimized connected components labeling with pixel prediction","authors":[{"person_name":{"surname":"Grana","first_name":"C"},"affiliations":[],"email":null},{"person_name":{"surname":"Baraldi","first_name":"L"},"affiliations":[],"email":null},{"person_name":{"surname":"Bolelli","first_name":"F"},"affiliations":[],"email":null}],"date":{"year":"2016","month":null,"day":null},"ids":{"DOI":"10.1007/978-3-319-48680-2_38","arXiv":null},"target":null,"publisher":"Springer","journal":null,"series":null,"scope":{"volume":10016,"pages":{"from_page":431,"to_page":440}}},"b9":{"title":"Decision trees for fast thinning algorithms","authors":[{"person_name":{"surname":"Grana","first_name":"C"},"affiliations":[],"email":null},{"person_name":{"surname":"Borghesani","first_name":"D"},"affiliations":[],"email":null},{"person_name":{"surname":"Cucchiara","first_name":"R"},"affiliations":[],"email":null}],"date":{"year":"2010","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":2836,"to_page":2839}}},"b10":{"title":"Adaptive document image binarization","authors":[{"person_name":{"surname":"Sauvola","first_name":"J"},"affiliations":[],"email":null},{"person_name":{"surname":"Pietikäinen","first_name":"M"},"affiliations":[],"email":null}],"date":{"year":"2000","month":null,"day":null},"ids":null,"target":null,"publisher":null,"journal":"Pattern Recognit","series":null,"scope":{"volume":33,"pages":{"from_page":225,"to_page":236}}},"b11":{"title":"A two-step dewarping of camera document images","authors":[{"person_name":{"surname":"Stamatopoulos","first_name":"N"},"affiliations":[],"email":null},{"person_name":{"surname":"Gatos","first_name":"B"},"affiliations":[],"email":null},{"person_name":{"surname":"Pratikakis","first_name":"I"},"affiliations":[],"email":null},{"person_name":{"surname":"Perantonis","first_name":"S"},"affiliations":[],"email":null}],"date":{"year":"2008","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":209,"to_page":216}}},"b12":{"title":"Document image dewarping using robust estimation of curled text lines","authors":[{"person_name":{"surname":"Ulges","first_name":"A"},"affiliations":[],"email":null},{"person_name":{"surname":"Lampert","first_name":"C"},"affiliations":[],"email":null},{"person_name":{"surname":"Breuel","first_name":"T"},"affiliations":[],"email":null}],"date":{"year":"2005","month":null,"day":null},"ids":null,"target":null,"publisher":"IEEE","journal":null,"series":null,"scope":{"volume":null,"pages":{"from_page":1001,"to_page":1005}}}},"sections":[{"title":"Introduction","paragraphs":[{"text":"XDOCS is designed with the intention of extending to a much wider audience of scholars, or even simply curious people, the possibility to access a variety of historical documents published on the web 1 .","refs":[{"start":200,"end":201,"marker":null,"target":"#foot_0"}]},{"text":"To that purpose, the project is developing an innovative data capturing technique able to extract document indexes in quasi-automatic mode from their handwritten contents. The devised solution intervenes after the dematerialisation action of scanning the historic documents and obtaining one image per couple of adjacent pages, and it is intended to be especially applied to a long series of documents such as the large number of civil registries that are available since the constitution of the Italian state.","refs":[]},{"text":"Since warping affects, as well as documents readability, most of the high level text processing such as OCR, word spotting, and handwritten recognition, dewarping digital text is one of the fundamental requirements to perform a correct extraction of indexes. This process starts from a curled page, usually captured by a flatbed scanner or by a digital camera, and aims to obtain an output image constituted only of horizontal straight text lines, without suffering from any distortion due to perspective or page warping.","refs":[]},{"text":"Over the last two decades many methods for document dewarping have been proposed. These approaches are usually classified in two categories according to the surface model adopted: restoration approaches based on 2D document image processing [8,13] and restoration approaches based on 3D document shape reconstruction [5,7]. Most of the dewarping techniques proposed in the past, of both categories, are specifically designed for typewritten text. These methodologies produce bad results when applied to handwritten text or, worse, to documents containing a mix of handwritten and typewritten text. In order to improve the XDOCS indexes extraction, the coarse dewarping technique originally proposed by Stamatopoulos et al. [12] was adjusted to address also handwritten documents.","refs":[{"start":241,"end":244,"marker":"bibr","target":"#b7"},{"start":244,"end":247,"marker":"bibr","target":"#b12"},{"start":317,"end":320,"marker":"bibr","target":"#b4"},{"start":320,"end":322,"marker":"bibr","target":"#b6"},{"start":723,"end":727,"marker":"bibr","target":"#b11"}]},{"text":"The remainder of the paper is organized as follows. Section 2 presents an overall description of the indexing process. In Sect. 3, the dewarping adopted technique is detailed. Section 4 reports some visual experimental results. Finally, in Sect. 5, are drawn the conclusions.","refs":[]}]},{"title":"Indexing Process","paragraphs":[{"text":"The XDOCS indexing process is split into two main phases, namely \"image rectification\" and \"indexing & publication\". The former is depicted in Fig. 1(a), showing the steps that move from a scanned image up to its final squaring. More specifically:","refs":[{"start":148,"end":152,"marker":"figure","target":"#fig_9"}]}]},{"title":"For all images","paragraphs":[]},{"title":"Take one Preprocessing","paragraphs":[]},{"title":"Rec fy the image","paragraphs":[]},{"title":"Save","paragraphs":[]},{"title":"Adjust","paragraphs":[]},{"title":"Repository repository","paragraphs":[]},{"title":"Rec fied image Bad shape","paragraphs":[]},{"title":"Document image processing","paragraphs":[]},{"title":"Dewarping Extrac on","paragraphs":[{"text":"Iden fy the curved projec on (a) Image rectification.","refs":[]}]},{"title":"Registra ons from 1 image","paragraphs":[]},{"title":"Cut Save","paragraphs":[{"text":"Indexes from each registra ons -Repository is the place where the original scanned images are found.","refs":[]}]},{"title":"Publish","paragraphs":[]},{"title":"Link indexes to registra on","paragraphs":[{"text":"-Preprocessing is the document image processing step, filtering out noise due to the intrinsic features of the original image and to the digitization process. -The Extraction step aims to find the projection of the curved surface represented by two almost vertical straight lines and by two third degree polynomial curves surrounding the document page (see Sect. 3.2 for details). This is required by the proposed dewarping method. -Adjust is the manual operation required whenever the Extraction operation fails.","refs":[]},{"text":"-Dewarping is the core step of the \"image rectification\" phase; its purpose is to compute the dewarping, which transforms the original image into a rectified and normalized one. -Save is the final step associating the rectified image to the original one in the Repository for further processing.","refs":[]},{"text":"The latter phase of the indexing process is depicted in turn in Fig. 1(b), showing the steps that cut individual registrations from the rectified image and lead to indexing each of those registrations. More specifically:","refs":[{"start":69,"end":73,"marker":"figure","target":"#fig_0"}]},{"text":"-Portal is the place where the registrations and their indexes are made available for consultation. -Cut is the image processing step separating and normalizing the three registrations that are present in every rectified image. -Save is the step storing the normalized registrations into the Portal.","refs":[]},{"text":"-Extract is the image processing function which extracts and compares parts of images, corresponding to names, places and numbers (mainly dates of birth) [4]. -Publish is the final step associating the extracted indexes to the corresponding registration in the Portal.","refs":[{"start":154,"end":157,"marker":"bibr","target":"#b3"}]},{"text":"Of course, the degree of completeness and confidence of the extracted indexes are strongly affected by the quality of the handwritten text and the state of preservation of the original registry. Those factors can however be increased by driving the Extraction action by templates representing the limited areas to be examined for the purpose of finding out each of the desired indexes. The templates are manually defined on the normalized registrations and in principle can depend on the single registry (year, municipality, handwriting style of the registrar).","refs":[]},{"text":"Figure 2 reports two examples of birth registry, the first one dated June 1888 and the second one September 1900. Each image shows two pages containing three birth registrations: one on the left-upper side, one on the right-bottom side and one split between the two pages. The three registrations share the same structure and present the intended indexes in equivalent and well identified positions. Moreover, the most critical indexes, namely family name and given name, appear twice in each registration and this redundancy can increase the level of confidence in the indexing.","refs":[{"start":7,"end":8,"marker":"figure","target":"#fig_2"}]},{"text":"The metadata identifying the double page image are: registry type, year and volume, place of registration (typically, a municipality). The intended indexes are in turn: birth month and day, name and family name, sex, father's name, mother's name and family name, possibly grandparents names.  ","refs":[]}]},{"title":"The Proposed Dewarping Approach","paragraphs":[{"text":"This section describes in detail \"Image Rectification\" phase focusing on Preprocesing, Extraction and Dewarping steps.","refs":[]}]},{"title":"Preprocessing","paragraphs":[{"text":"Before proceeding with the dewarping step, which is detailed in the following, the gray level images are mapped into black-white ones using the adaptive threshold described in [11] (see Fig. 3(a) as example). Then, noise is filtered out principally using information related to statistics of connected components calculated using [9]. An example of preprocessing output is reported in Fig. 3(b).  ","refs":[{"start":176,"end":180,"marker":"bibr","target":"#b10"},{"start":191,"end":194,"marker":"figure","target":"#fig_9"},{"start":330,"end":333,"marker":"bibr","target":"#b8"},{"start":390,"end":394,"marker":"figure","target":"#fig_4"}]}]},{"title":"Extraction","paragraphs":[{"text":"The extraction step aims at identifying the 2D projection of the curved surface defined by the four polynomial curves which surround the document text on every single page (see Fig. 5).","refs":[{"start":182,"end":183,"marker":"figure","target":"#fig_7"}]},{"text":"According to the warping model characterizing historical documents, the right and left polynomial curves are supposed to be lines and generically defined as:","refs":[]},{"text":"To identify these lines the approach combines the information obtained by the Hough transform [6] and the position of A, B, C and D vertexes of the curved surface projection retrieved using the Harris algorithm and starting from a thinned image [10].","refs":[{"start":94,"end":97,"marker":"bibr","target":"#b5"},{"start":245,"end":249,"marker":"bibr","target":"#b9"}]},{"text":"Top and bottom curves, instead, are supposed to be third degree polynomial lines and their coefficients are fitted with the Least Square Estimation algorithm and have the following general expression:","refs":[]},{"text":"More accurate results could be achieved modeling these curves as higher polynomial functions. This change increases dewarping computation time slightly improving accuracy, so it is not recommended. Boundary extraction significantly influences the quality of the dewarping process, and then the indexes extraction: if it fails the Adjust step leaves the user the possibility to correct curves via a GUI: examples of the automatic extracted 2D projections are reported in Fig. 4.  ","refs":[{"start":475,"end":476,"marker":"figure","target":"#fig_6"}]},{"text":"Fig. 5. Dewarping transformation model: projection of the curved surface on the left side, 2D rectangular destination area on the right side.","refs":[{"start":5,"end":6,"marker":"figure","target":"#fig_7"}]}]},{"title":"Dewarping","paragraphs":[{"text":"This is the core step of the dewarping approach which aim to map the projection of the curved surface to a 2D rectangular area with fixed dimensions H and W (see ","refs":[]},{"text":"where f(x) and g(x) are the functions describing the polynomial lines. Therefore, given a generic point K (x K , y K ) on the warped image, the corresponding one on the 2D rectangular area K (x K , y K ) can be found preserving proportions between dimensions of projected curves and 2D destination area. First of all it is necessary to find the two points","refs":[]},{"text":"The transformation equations are then defined as follows:","refs":[]},{"text":"To compute the final page dewarping every pixel in the dewarped image is mapped to a floating-point coordinate in the warped image, therefore the process is concluded using a simple interpolation.","refs":[]}]},{"title":"Experimental Results","paragraphs":[{"text":"Common practices in the evaluation of dewarping techniques consist of comparing the error rate of OCR software applied on the original and dewarped images or are simply based on visual pleasing impressions. Unfortunately, the first strategy is unfeasible for documents which contain handwritten text, so the second one is adopted in this paper. Figure 6 reports an example result of the proposed dewarping technique applied to a regular modern form image, which contains a bounding box and both handwritten and typewritten text. It is possible to see that the horizontal lines in the dewarped image are perfectly aligned with the horizontal boundaries of the box.","refs":[{"start":352,"end":353,"marker":"figure","target":"#fig_8"}]},{"text":"Figure 7 instead, shows another result applied on the typical historical documents treated in this work. Also here both handwritten and printed text is present and the detection phase is complicated by the presence of many distracting elements.","refs":[{"start":7,"end":8,"marker":"figure","target":"#fig_10"}]},{"text":"The method has been tested on more than 4.000 birth acts and on almost 200 generic digital documents similar to the one reported in Fig. 6. Experimental results reveal that more than 85% of curved 2D projections are correctly extracted and do not require the manual Adjust step before performing the dewarping procedure.   ","refs":[{"start":137,"end":138,"marker":"figure","target":"#fig_8"}]}]}],"tables":{},"abstract":{"title":"Abstract","paragraphs":[{"text":"This work presents a research project, named XDOCS, aimed at extending to a much wider audience the possibility to access a variety of historical documents published on the web. The paper presents an overview of the indexing process that will be used to achieve the goal, focusing on the adopted dewarping technique. The proposed dewarping approach performs its task with the help of a transformation model which maps the projection of a curved surface to a 2D rectangular area. The novelty introduced with this work regards the possibility of applying dewarping to document images which contain both handwritten and typewritten text.","refs":[]}]}}